function a = smoothpolyfit(t,x_boundary,order)
A=[0.^(2*order-1:-1:0);...
    t.^(2*order-1:-1:0);...
    (2*order-1:-1:0).*[0.^(2*order-2:-1:0) 0];...
    (2*order-1:-1:0).*[t.^(2*order-2:-1:0) 0];...
    (2*order-1:-1:0).*[2*order-2:-1:0 0].*[0.^(2*order-3:-1:0) 0 0];...
    (2*order-1:-1:0).*[2*order-2:-1:0 0].*[t.^(2*order-3:-1:0) 0 0];...
    (2*order-1:-1:0).*[2*order-2:-1:0 0].*[2*order-3:-1:0 0 0].*[0.^(2*order-4:-1:0) 0 0 0];...
    (2*order-1:-1:0).*[2*order-2:-1:0 0].*[2*order-3:-1:0 0 0].*[t.^(2*order-4:-1:0) 0 0 0];...
    ];
B=[x_boundary';zeros(2*order-2,1)];
a=pinv(A)*B;
end